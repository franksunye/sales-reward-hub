# 北京9月功能点清单与测试矩阵

## 文档信息
- **项目**: 北京9月签约激励Job升级
- **版本**: v1.0
- **创建日期**: 2025-01-02
- **测试方法**: 功能点驱动测试 (Feature-Driven Testing)

## 核心功能点清单

### F01: 工单金额上限调整
- **功能描述**: 合同金额>5万时按5万计入业绩
- **验收标准**: 
  - AC01.1: 6万元合同按5万计入业绩
  - AC01.2: 多个合同累计上限正确处理
  - AC01.3: 5万以下合同不受影响
- **测试用例**: TC01_project_amount_limit
- **测试状态**: ⭕ 待实现

### F02: 幸运数字机制重构
- **功能描述**: 基于个人签约顺序，第5、10、15个等（5的倍数）合同获得58元奖励
- **验收标准**:
  - AC02.1: 第5个合同获得58元"接好运"奖励
  - AC02.2: 第10个合同获得58元"接好运"奖励
  - AC02.3: 第4、6个合同不获得奖励
  - AC02.4: 不区分合同金额，统一58元
- **测试用例**: TC02_personal_sequence_lucky
- **测试状态**: ⭕ 待实现

### F03: 节节高门槛提升
- **功能描述**: 10个合同后解锁，奖励金额翻倍
- **验收标准**:
  - AC03.1: 9个合同不获得节节高奖励
  - AC03.2: 10个合同+8万元获得400元达标奖
  - AC03.3: 18万元获得800元优秀奖
  - AC03.4: 28万元获得1600元精英奖
- **测试用例**: TC03_tiered_rewards_new_threshold
- **测试状态**: ⭕ 待实现

### F04: 徽章机制禁用
- **功能描述**: 取消精英管家和新人徽章及双倍激励
- **验收标准**:
  - AC04.1: 精英管家不显示徽章
  - AC04.2: 精英管家不获得双倍奖励
  - AC04.3: 新星徽章不显示
- **测试用例**: TC04_badge_disabled
- **测试状态**: ⭕ 待实现

### F05: 配置驱动设计
- **功能描述**: 新增BJ-2025-09配置项，支持所有新功能
- **验收标准**:
  - AC05.1: BJ-2025-09配置存在且正确
  - AC05.2: 配置项完全隔离，不影响其他配置
  - AC05.3: 所有配置参数符合设计要求
- **测试用例**: TC05_config_isolation
- **测试状态**: ✅ 已实现

### F06: 幸运数字逻辑通用化
- **功能描述**: determine_lucky_number_reward_generic函数支持多种模式
- **验收标准**:
  - AC06.1: 支持personal_sequence模式
  - AC06.2: 支持传统contract_number模式
  - AC06.3: 配置驱动的模式切换
- **测试用例**: TC06_lucky_number_generic
- **测试状态**: ⭕ 待实现

### F07: 徽章配置支持
- **功能描述**: should_enable_badge函数支持徽章开关
- **验收标准**:
  - AC07.1: 支持精英徽章开关
  - AC07.2: 支持新星徽章开关
  - AC07.3: 默认值向后兼容
- **测试用例**: TC07_badge_config
- **测试状态**: ⭕ 待实现

### F08: 数据处理包装函数
- **功能描述**: process_data_sep_beijing复用现有逻辑
- **验收标准**:
  - AC08.1: 正确调用通用数据处理函数
  - AC08.2: 使用BJ-2025-09配置
  - AC08.3: 输出格式与现有函数一致
- **测试用例**: TC08_data_processing_wrapper
- **测试状态**: ⭕ 待实现

### F09: 通知包装函数
- **功能描述**: notify_awards_sep_beijing支持徽章禁用
- **验收标准**:
  - AC09.1: 正确禁用新星徽章
  - AC09.2: 通知格式正确
  - AC09.3: 奖励金额显示正确
- **测试用例**: TC09_notification_wrapper
- **测试状态**: ⭕ 待实现

### F10: 回归测试保障
- **功能描述**: 确保现有功能完全不受影响
- **验收标准**:
  - AC10.1: 北京8月功能完全正常
  - AC10.2: 上海所有功能完全正常
  - AC10.3: 配置完全隔离
- **测试用例**: TC10_regression_suite
- **测试状态**: ✅ 已实现

## 测试覆盖率矩阵

| 功能点 | 验收标准数 | 已测试 | 通过率 | 状态 |
|--------|------------|--------|--------|------|
| F01 | 3 | 0 | 0% | ⭕ 待实现 |
| F02 | 4 | 0 | 0% | ⭕ 待实现 |
| F03 | 4 | 0 | 0% | ⭕ 待实现 |
| F04 | 3 | 0 | 0% | ⭕ 待实现 |
| F05 | 3 | 3 | 100% | ✅ 已完成 |
| F06 | 3 | 0 | 0% | ⭕ 待实现 |
| F07 | 3 | 0 | 0% | ⭕ 待实现 |
| F08 | 3 | 0 | 0% | ⭕ 待实现 |
| F09 | 3 | 0 | 0% | ⭕ 待实现 |
| F10 | 3 | 3 | 100% | ✅ 已完成 |
| **总计** | **32** | **6** | **19%** | **进行中** |

## 测试执行策略

### 阶段1: 单元测试（功能点级别）
```bash
# 按功能点执行测试
python -m pytest tests/test_beijing_sep_features.py::TestF01ProjectAmountLimit -v
python -m pytest tests/test_beijing_sep_features.py::TestF02PersonalSequenceLucky -v
# ... 其他功能点
```

### 阶段2: 集成测试（跨功能点）
```bash
# 测试功能点间的协作
python -m pytest tests/test_beijing_sep_integration.py -v
```

### 阶段3: 回归测试（保障现有功能）
```bash
# 确保不破坏现有功能
python -m pytest tests/test_regression_baseline.py -v
```

### 阶段4: 端到端测试（完整流程）
```bash
# 完整业务流程验证
python -m pytest tests/test_beijing_sep_e2e.py -v
```

## 成功标准

### 功能完整性标准
- [ ] 所有10个功能点测试通过率100%
- [ ] 所有32个验收标准全部满足
- [ ] 回归测试通过率100%

### 质量保障标准
- [ ] 代码覆盖率 > 90%
- [ ] 所有测试用例可重复执行
- [ ] 测试执行时间 < 5分钟

### 兼容性标准
- [ ] 北京8月功能正常
- [ ] 上海所有功能正常
- [ ] 配置向后兼容

---

**测试原则**: 只有当所有功能点的所有验收标准都通过测试时，才能认为"功能完全正确"。
